<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Quantum Oracle</title>
    
    <!-- Telegram WebApp Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;800&family=Inter:wght@300;400;600&display=swap');

        :root {
            --color-bg: #050014;
            --color-gold: #FFD700;
            --color-neon-purple: #B026FF;
            --color-error: #FF3333;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg);
            color: white;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            -webkit-tap-highlight-color: transparent;
        }

        h1, h2, h3, .font-oracle { font-family: 'Cinzel', serif; }

        /* --- Background Particles --- */
        .stars {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: -1;
            background: radial-gradient(circle at center, #1a0b2e 0%, #000000 100%);
            overflow: hidden;
        }
        .star {
            position: absolute; background: white; border-radius: 50%;
            opacity: 0; animation: float-sparkle 4s infinite ease-in-out;
        }
        @keyframes float-sparkle {
            0% { transform: translateY(0) scale(0); opacity: 0; }
            50% { opacity: 0.8; }
            100% { transform: translateY(-100px) scale(1); opacity: 0; }
        }

        /* --- Effects --- */
        .glow-text-gold { text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
        .glow-box-purple { box-shadow: 0 0 15px rgba(176, 38, 255, 0.2); border: 1px solid rgba(176, 38, 255, 0.3); }
        .glow-box-gold { box-shadow: 0 0 15px rgba(255, 215, 0, 0.15); border: 1px solid rgba(255, 215, 0, 0.4); }
        .btn-pulse { animation: pulse-gold 2s infinite; }
        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .blur-content { filter: blur(6px); user-select: none; pointer-events: none; }
        .hidden { display: none !important; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; }
    </style>
</head>
<body>

    <!-- Background -->
    <div class="stars" id="star-container"></div>

    <!-- Main App -->
    <main class="relative w-full h-full flex flex-col z-10">
        
        <!-- === SCENE 1: INPUT === -->
        <div id="scene-input" class="flex-1 flex flex-col items-center justify-center px-6 space-y-12 animate-fade-in">
            <div class="text-center space-y-4">
                <h1 class="text-4xl font-bold tracking-widest text-[#FFD700] glow-text-gold">QUANTUM<br>ORACLE</h1>
                <p class="text-purple-300 text-sm tracking-widest font-light uppercase opacity-80">–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –•—Ä–æ–Ω–∏–∫–∞–º</p>
            </div>

            <div class="w-full max-w-xs space-y-8">
                <div class="space-y-2">
                    <label class="block text-center text-xs text-gold-dim uppercase tracking-[0.2em] mb-2 font-oracle text-[#C5A000]">–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                    <input type="date" id="date-input" class="relative w-full bg-[#0a0510] border border-white/10 text-white text-center text-xl p-4 rounded-lg focus:outline-none focus:border-[#FFD700] transition-colors font-mono uppercase">
                </div>
                <button id="btn-start" disabled class="w-full bg-gradient-to-r from-[#B026FF] to-[#7c1dba] text-white font-oracle font-bold text-lg py-4 rounded-lg tracking-widest uppercase opacity-50 transition-all duration-300 transform scale-95">–ù–∞—á–∞—Ç—å —Å–∫–∞–Ω</button>
            </div>
        </div>

        <!-- === SCENE 2: PROCESSING === -->
        <div id="scene-process" class="hidden flex-1 flex-col items-center justify-center px-8 space-y-8">
            <div class="relative w-48 h-48 flex items-center justify-center">
                <div class="absolute inset-0 border-2 border-purple-900/50 rounded-full"></div>
                <div class="absolute inset-2 border-2 border-t-[#FFD700] border-r-transparent border-b-purple-500 border-l-transparent rounded-full animate-spin"></div>
                <span class="text-2xl font-oracle animate-pulse">üëÅ</span>
            </div>
            <div class="text-center w-full">
                <p id="process-text" class="font-mono text-[#00ff9d] text-sm tracking-wide h-6">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</p>
                <div class="w-full bg-gray-900 h-1 mt-4 rounded-full overflow-hidden">
                    <div id="progress-bar" class="h-full bg-gradient-to-r from-purple-500 to-[#FFD700] w-0 transition-all duration-100 ease-out"></div>
                </div>
            </div>
        </div>

        <!-- === SCENE 3: RESULT === -->
        <div id="scene-result" class="hidden flex-1 flex-col h-full overflow-y-auto overflow-x-hidden animate-fade-in relative">
            <div class="px-6 py-8 pb-32 space-y-6">
                <div class="text-center">
                    <h2 class="text-2xl font-oracle text-[#FFD700] mb-1">–ê–Ω–∞–ª–∏–∑ –ó–∞–≤–µ—Ä—à–µ–Ω</h2>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div class="col-span-1 bg-white/5 backdrop-blur-md border border-[#FFD700]/30 rounded-xl p-4 flex flex-col items-center justify-center space-y-2 glow-box-gold">
                        <span class="text-[10px] text-[#FFD700] uppercase tracking-widest">–ß–∏—Å–ª–æ –ü—É—Ç–∏</span>
                        <span id="res-path" class="text-4xl font-oracle font-bold text-white">0</span>
                    </div>
                    <div class="col-span-1 bg-white/5 backdrop-blur-md border border-purple-500/30 rounded-xl p-4 flex flex-col items-center justify-center space-y-2 glow-box-purple">
                        <span class="text-[10px] text-purple-300 uppercase tracking-widest">–°—Ç–∏—Ö–∏—è</span>
                        <span id="res-element" class="text-xl font-oracle font-bold text-white">–≠—Ñ–∏—Ä</span>
                    </div>
                </div>

                <div class="w-full bg-gradient-to-b from-[#1a0b2e] to-black border border-white/10 rounded-xl p-6 relative overflow-hidden group">
                    <div class="absolute top-0 right-0 p-4 opacity-20 text-6xl font-oracle select-none">üé¥</div>
                    <span class="text-[10px] text-gray-400 uppercase tracking-widest block mb-2">–í–∞—à –ê—Ä–∫–∞–Ω –¢–∞—Ä–æ</span>
                    <h3 id="res-arcana" class="text-2xl font-oracle text-white mb-1">–®—É—Ç</h3>
                    <p id="res-arcana-desc" class="text-xs text-purple-200/80 leading-relaxed">–°–∏–º–≤–æ–ª –Ω–æ–≤—ã—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏–π, —Å–≤–æ–±–æ–¥—ã –∏ —á–∏—Å—Ç–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞.</p>
                </div>

                <!-- PAYWALL BLOCK -->
                <div class="mt-8 border-2 border-[#FF3333] bg-[#FF3333]/10 rounded-xl p-5 relative overflow-hidden animate-pulse">
                    <h3 class="font-bold text-sm tracking-wider uppercase font-oracle text-[#FF3333] mb-1">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –û—à–∏–±–∫–∞</h3>
                    <p class="text-xs text-red-200 font-bold mb-1 uppercase tracking-widest">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–∞–Ω–∞–ª –ø–µ—Ä–µ–∫—Ä—ã—Ç</p>
                    <div class="relative mt-3">
                        <p class="text-sm text-gray-400 blur-content leading-relaxed">
                            –°–æ–≥–ª–∞—Å–Ω–æ –∞–Ω–∞–ª–∏–∑—É –≤–∞—à–µ–π –∫–∞—Ä–º–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã...
                        </p>
                        <div class="absolute inset-0 flex items-center justify-center"><span class="text-2xl">üîí</span></div>
                    </div>
                </div>
            </div>

            <!-- Sticky Button (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø) -->
            <div class="fixed bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black via-black to-transparent z-50">
                <button 
                    onclick="window.Telegram.WebApp.sendData(JSON.stringify({action: 'buy'}))"
                    class="w-full bg-gradient-to-r from-[#FFD700] via-[#FFEd4B] to-[#FFD700] text-black font-oracle font-black text-lg py-4 rounded-xl shadow-[0_0_20px_rgba(255,215,0,0.4)] btn-pulse uppercase tracking-widest flex items-center justify-center gap-2 cursor-pointer active:scale-95 transition-transform"
                >
                    <span>–°–Ω—è—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É</span>
                    <span class="bg-black/20 px-2 py-0.5 rounded text-xs font-bold">250 ‚≠êÔ∏è</span>
                </button>
            </div>
        </div>
    </main>

    <!-- Logic -->
    <script>
        // Init Telegram
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        tg.setHeaderColor('#050014');
        tg.setBackgroundColor('#050014');

        // Stars
        const container = document.getElementById('star-container');
        for(let i=0; i<50; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = Math.random() * 3 + 1;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            star.style.animationDuration = `${Math.random() * 3 + 2}s`;
            star.style.animationDelay = `${Math.random() * 5}s`;
            container.appendChild(star);
        }

        // Logic
        const dateInput = document.getElementById('date-input');
        const btnStart = document.getElementById('btn-start');
        
        dateInput.addEventListener('change', (e) => {
            if(e.target.value) {
                btnStart.disabled = false;
                btnStart.classList.remove('opacity-50', 'scale-95');
                btnStart.classList.add('opacity-100', 'scale-100', 'btn-pulse');
            }
        });

        btnStart.addEventListener('click', () => {
            if(!dateInput.value) return;
            
            // Fake Calc
            const dateVal = dateInput.value;
            let sum = dateVal.replace(/-/g, '').split('').map(Number).reduce((a,b)=>a+b,0);
            while(sum > 9) sum = sum.toString().split('').map(Number).reduce((a,b)=>a+b,0);
            
            const day = parseInt(dateVal.split('-')[2]);
            const arcana = day > 22 ? day - 22 : day;
            const month = parseInt(dateVal.split('-')[1]);
            const elems = ["–í–æ–¥–∞", "–ó–µ–º–ª—è", "–û–≥–æ–Ω—å", "–í–æ–∑–¥—É—Ö"];
            const elem = elems[Math.floor((month % 12) / 3)];

            document.getElementById('res-path').innerText = sum;
            document.getElementById('res-element').innerText = elem;
            document.getElementById('res-arcana').innerText = arcana;

            // Animations
            document.getElementById('scene-input').classList.add('hidden');
            document.getElementById('scene-process').classList.remove('hidden');
            document.getElementById('scene-process').style.display = 'flex';

            let width = 0;
            const interval = setInterval(() => {
                width += 1;
                document.getElementById('progress-bar').style.width = width + '%';
                if(width >= 100) {
                    clearInterval(interval);
                    document.getElementById('scene-process').classList.add('hidden');
                    document.getElementById('scene-result').classList.remove('hidden');
                    document.getElementById('scene-result').style.display = 'flex';
                }
            }, 35);
        });
    </script>
</body>
</html>